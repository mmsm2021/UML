<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="605px" preserveAspectRatio="none" style="width:2360px;height:605px;" version="1.1" viewBox="0 0 2360 605" width="2360px" zoomAndPan="magnify"><defs><filter height="300%" id="f1opn4azs51r90" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[602617df5f20c96d15c69f85e16ef005]
cluster MMSM\\Lib\\ErrorHandlers--><polygon fill="#FFFFFF" filter="url(#f1opn4azs51r90)" points="357,6,547,6,554,28.4883,853,28.4883,853,398,357,398,357,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="357" x2="554" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="184" x="361" y="21.5352">MMSM\Lib\ErrorHandlers</text><!--MD5=[cb245b0ef9e19d19c62e199b6a2fb5bd]
cluster MMSM\\Lib\\Factories--><polygon fill="#FFFFFF" filter="url(#f1opn4azs51r90)" points="619,452,775,452,782,474.4883,839,474.4883,839,598,619,598,619,452" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="619" x2="782" y1="474.4883" y2="474.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="150" x="623" y="467.5352">MMSM\Lib\Factories</text><!--MD5=[4751c4f25202d7cd0480cf60f9a36e32]
cluster MMSM\\Lib\\Exceptions--><polygon fill="#FFFFFF" filter="url(#f1opn4azs51r90)" points="16,25.5,184,25.5,191,47.9883,333,47.9883,333,348.5,16,348.5,16,25.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="191" y1="47.9883" y2="47.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="162" x="20" y="41.0352">MMSM\Lib\Exceptions</text><!--MD5=[536dc9c1f74e225caea5f0f16b64d869]
cluster MMSM\\Lib\\Parsers--><polygon fill="#FFFFFF" filter="url(#f1opn4azs51r90)" points="1456,19,1600,19,1607,41.4883,1764,41.4883,1764,131,1456,131,1456,19" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1456" x2="1607" y1="41.4883" y2="41.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1460" y="34.5352">MMSM\Lib\Parsers</text><!--MD5=[801f4c0500074a918a3309865b60edf7]
cluster MMSM\\Lib\\Validators--><polygon fill="#FFFFFF" filter="url(#f1opn4azs51r90)" points="2064,236.5,2229,236.5,2236,258.9883,2343,258.9883,2343,587.5,2064,587.5,2064,236.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="2064" x2="2236" y1="258.9883" y2="258.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="159" x="2068" y="252.0352">MMSM\Lib\Validators</text><!--MD5=[0622b8c740199b99bb7517af8e1812ad]
cluster MMSM\\Lib--><polygon fill="#FFFFFF" filter="url(#f1opn4azs51r90)" points="877,155,960,155,967,177.4883,2040,177.4883,2040,581,877,581,877,155" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="877" x2="967" y1="177.4883" y2="177.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="77" x="881" y="170.5352">MMSM\Lib</text><!--MD5=[41df3d332e908d8155172351a8c9d0a9]
class MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface--><rect codeLine="4" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="86.8652" id="MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface" style="stroke:#A80036;stroke-width:1.5;" width="180" x="514" y="41"/><ellipse cx="539.35" cy="57" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M535.7777,53.2651 L535.7777,51.1069 L543.1571,51.1069 L543.1571,53.2651 L540.6918,53.2651 L540.6918,61.3418 L543.1571,61.3418 L543.1571,63.5 L535.7777,63.5 L535.7777,61.3418 L538.2431,61.3418 L538.2431,53.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="125" x="555.65" y="61.5352">ErrorHandlerInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="515" x2="693" y1="73" y2="73"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162" x="520" y="87.6348">displayErrorDetails, logErrors,</text><line style="stroke:#A80036;stroke-width:1.5;" x1="515" x2="693" y1="93.9551" y2="93.9551"/><ellipse cx="525" cy="104.9551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="154" x="534" y="108.5898">__invoke(request, throwable,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="534" y="121.5449">logErrorDetails)</text><!--MD5=[1398ed616d2c432b4a9168c0bbe3d92f]
class MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler--><rect codeLine="12" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="146.6855" id="MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler" style="stroke:#A80036;stroke-width:1.5;" width="213" x="373.5" y="235"/><ellipse cx="426.25" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M428.7231,257.1431 Q428.1421,257.4419 427.5029,257.5913 Q426.8638,257.7407 426.1582,257.7407 Q423.6514,257.7407 422.3315,256.0889 Q421.0117,254.437 421.0117,251.3159 Q421.0117,248.1865 422.3315,246.5347 Q423.6514,244.8828 426.1582,244.8828 Q426.8638,244.8828 427.5112,245.0322 Q428.1587,245.1816 428.7231,245.4805 L428.7231,248.2031 Q428.0923,247.6221 427.4988,247.3523 Q426.9053,247.0825 426.2744,247.0825 Q424.9297,247.0825 424.2449,248.1492 Q423.5601,249.2158 423.5601,251.3159 Q423.5601,253.4077 424.2449,254.4744 Q424.9297,255.541 426.2744,255.541 Q426.9053,255.541 427.4988,255.2712 Q428.0923,255.0015 428.7231,254.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="446.75" y="255.5352">JsonErrorHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="374.5" x2="585.5" y1="267" y2="267"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="381.5" y="275"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="393.5" y="281.6348">logger</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="381.5" y="287.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="393.5" y="294.5898">jsonResponseFactory</text><line style="stroke:#A80036;stroke-width:1.0;" x1="374.5" x2="585.5" y1="300.9102" y2="300.9102"/><line style="stroke:#A80036;stroke-width:1.0;" x1="374.5" x2="585.5" y1="302.9102" y2="302.9102"/><ellipse cx="384.5" cy="311.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="187" x="393.5" y="315.5449">__construct(jsonResponseFactory)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="374.5" x2="585.5" y1="321.8652" y2="321.8652"/><line style="stroke:#A80036;stroke-width:1.0;" x1="374.5" x2="585.5" y1="323.8652" y2="323.8652"/><ellipse cx="384.5" cy="332.8652" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="154" x="393.5" y="336.5">__invoke(request, throwable,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162" x="393.5" y="349.4551">displayErrorDetails, logErrors,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="393.5" y="362.4102">logErrorDetails)</text><ellipse cx="384.5" cy="371.7305" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="393.5" y="375.3652">setLogger(logger)</text><!--MD5=[a3e1c77d4a6ac7abadaf10cdeec4e6a4]
class MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler--><rect codeLine="26" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="146.6855" id="MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler" style="stroke:#A80036;stroke-width:1.5;" width="215" x="621.5" y="235"/><ellipse cx="636.5" cy="251" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M638.9731,257.1431 Q638.3921,257.4419 637.7529,257.5913 Q637.1138,257.7407 636.4082,257.7407 Q633.9014,257.7407 632.5815,256.0889 Q631.2617,254.437 631.2617,251.3159 Q631.2617,248.1865 632.5815,246.5347 Q633.9014,244.8828 636.4082,244.8828 Q637.1138,244.8828 637.7612,245.0322 Q638.4087,245.1816 638.9731,245.4805 L638.9731,248.2031 Q638.3423,247.6221 637.7488,247.3523 Q637.1553,247.0825 636.5244,247.0825 Q635.1797,247.0825 634.4949,248.1492 Q633.8101,249.2158 633.8101,251.3159 Q633.8101,253.4077 634.4949,254.4744 Q635.1797,255.541 636.5244,255.541 Q637.1553,255.541 637.7488,255.2712 Q638.3423,255.0015 638.9731,254.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="183" x="650.5" y="255.5352">ValidationExceptionJsonHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="622.5" x2="835.5" y1="267" y2="267"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="629.5" y="275"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="641.5" y="281.6348">logger</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="629.5" y="287.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="641.5" y="294.5898">jsonResponseFactory</text><line style="stroke:#A80036;stroke-width:1.0;" x1="622.5" x2="835.5" y1="300.9102" y2="300.9102"/><line style="stroke:#A80036;stroke-width:1.0;" x1="622.5" x2="835.5" y1="302.9102" y2="302.9102"/><ellipse cx="632.5" cy="311.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="187" x="641.5" y="315.5449">__construct(jsonResponseFactory)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="622.5" x2="835.5" y1="321.8652" y2="321.8652"/><line style="stroke:#A80036;stroke-width:1.0;" x1="622.5" x2="835.5" y1="323.8652" y2="323.8652"/><ellipse cx="632.5" cy="332.8652" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="154" x="641.5" y="336.5">__invoke(request, throwable,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162" x="641.5" y="349.4551">displayErrorDetails, logErrors,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85" x="641.5" y="362.4102">logErrorDetails)</text><ellipse cx="632.5" cy="371.7305" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="641.5" y="375.3652">setLogger(logger)</text><!--MD5=[c2923c5bb552a18526b46c57d7772537]
class MMSM\\Lib\\Factories\\JsonResponseFactory--><rect codeLine="50" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="94.8652" id="MMSM\\Lib\\Factories\\JsonResponseFactory" style="stroke:#A80036;stroke-width:1.5;" width="188" x="635" y="487"/><ellipse cx="665.75" cy="503" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M668.2231,509.1431 Q667.6421,509.4419 667.0029,509.5913 Q666.3638,509.7407 665.6582,509.7407 Q663.1514,509.7407 661.8315,508.0889 Q660.5117,506.437 660.5117,503.3159 Q660.5117,500.1865 661.8315,498.5347 Q663.1514,496.8828 665.6582,496.8828 Q666.3638,496.8828 667.0112,497.0322 Q667.6587,497.1816 668.2231,497.4805 L668.2231,500.2031 Q667.5923,499.6221 666.9988,499.3523 Q666.4053,499.0825 665.7744,499.0825 Q664.4297,499.0825 663.7449,500.1492 Q663.0601,501.2158 663.0601,503.3159 Q663.0601,505.4077 663.7449,506.4744 Q664.4297,507.541 665.7744,507.541 Q666.4053,507.541 666.9988,507.2712 Q667.5923,507.0015 668.2231,506.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="683.25" y="507.5352">JsonResponseFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="636" x2="822" y1="519" y2="519"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="643" y="527"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90" x="655" y="533.6348">responseFactory</text><line style="stroke:#A80036;stroke-width:1.0;" x1="636" x2="822" y1="539.9551" y2="539.9551"/><line style="stroke:#A80036;stroke-width:1.0;" x1="636" x2="822" y1="541.9551" y2="541.9551"/><ellipse cx="646" cy="550.9551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162" x="655" y="554.5898">__construct(responseFactory)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="636" x2="822" y1="560.9102" y2="560.9102"/><line style="stroke:#A80036;stroke-width:1.0;" x1="636" x2="822" y1="562.9102" y2="562.9102"/><ellipse cx="646" cy="571.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="655" y="575.5449">create(code, data)</text><!--MD5=[3ae1c56072868d35a12f230b4544d389]
class MMSM\\Lib\\Exceptions\\DefinitionException--><rect codeLine="38" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="48" id="MMSM\\Lib\\Exceptions\\DefinitionException" style="stroke:#A80036;stroke-width:1.5;" width="142" x="32" y="60.5"/><ellipse cx="47" cy="76.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M49.4731,82.6431 Q48.8921,82.9419 48.2529,83.0913 Q47.6138,83.2407 46.9082,83.2407 Q44.4014,83.2407 43.0815,81.5889 Q41.7617,79.937 41.7617,76.8159 Q41.7617,73.6865 43.0815,72.0347 Q44.4014,70.3828 46.9082,70.3828 Q47.6138,70.3828 48.2612,70.5322 Q48.9087,70.6816 49.4731,70.9805 L49.4731,73.7031 Q48.8423,73.1221 48.2488,72.8523 Q47.6553,72.5825 47.0244,72.5825 Q45.6797,72.5825 44.9949,73.6492 Q44.3101,74.7158 44.3101,76.8159 Q44.3101,78.9077 44.9949,79.9744 Q45.6797,81.041 47.0244,81.041 Q47.6553,81.041 48.2488,80.7712 Q48.8423,80.5015 49.4731,79.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="110" x="61" y="81.0352">DefinitionException</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="173" y1="92.5" y2="92.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="173" y1="100.5" y2="100.5"/><!--MD5=[120792cbab7c1fab229c3fe977d9ba2a]
class MMSM\\Lib\\Exceptions\\JwkException--><rect codeLine="42" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="48" id="MMSM\\Lib\\Exceptions\\JwkException" style="stroke:#A80036;stroke-width:1.5;" width="108" x="209" y="60.5"/><ellipse cx="224" cy="76.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M226.4731,82.6431 Q225.8921,82.9419 225.2529,83.0913 Q224.6138,83.2407 223.9082,83.2407 Q221.4014,83.2407 220.0815,81.5889 Q218.7617,79.937 218.7617,76.8159 Q218.7617,73.6865 220.0815,72.0347 Q221.4014,70.3828 223.9082,70.3828 Q224.6138,70.3828 225.2612,70.5322 Q225.9087,70.6816 226.4731,70.9805 L226.4731,73.7031 Q225.8423,73.1221 225.2488,72.8523 Q224.6553,72.5825 224.0244,72.5825 Q222.6797,72.5825 221.9949,73.6492 Q221.3101,74.7158 221.3101,76.8159 Q221.3101,78.9077 221.9949,79.9744 Q222.6797,81.041 224.0244,81.041 Q224.6553,81.041 225.2488,80.7712 Q225.8423,80.5015 226.4731,79.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76" x="238" y="81.0352">JwkException</text><line style="stroke:#A80036;stroke-width:1.5;" x1="210" x2="316" y1="92.5" y2="92.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="210" x2="316" y1="100.5" y2="100.5"/><!--MD5=[cad071bd034a483161c1801712261a74]
class MMSM\\Lib\\Exceptions\\JWKKeyFileException--><rect codeLine="46" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="48" id="MMSM\\Lib\\Exceptions\\JWKKeyFileException" style="stroke:#A80036;stroke-width:1.5;" width="150" x="32" y="284.5"/><ellipse cx="47" cy="300.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M49.4731,306.6431 Q48.8921,306.9419 48.2529,307.0913 Q47.6138,307.2407 46.9082,307.2407 Q44.4014,307.2407 43.0815,305.5889 Q41.7617,303.937 41.7617,300.8159 Q41.7617,297.6865 43.0815,296.0347 Q44.4014,294.3828 46.9082,294.3828 Q47.6138,294.3828 48.2612,294.5322 Q48.9087,294.6816 49.4731,294.9805 L49.4731,297.7031 Q48.8423,297.1221 48.2488,296.8523 Q47.6553,296.5825 47.0244,296.5825 Q45.6797,296.5825 44.9949,297.6492 Q44.3101,298.7158 44.3101,300.8159 Q44.3101,302.9077 44.9949,303.9744 Q45.6797,305.041 47.0244,305.041 Q47.6553,305.041 48.2488,304.7712 Q48.8423,304.5015 49.4731,303.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="118" x="61" y="305.0352">JWKKeyFileException</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="181" y1="316.5" y2="316.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="181" y1="324.5" y2="324.5"/><!--MD5=[79e5c0f5adc0d21986b787f079babe0a]
class MMSM\\Lib\\Parsers\\JsonBodyParser--><rect codeLine="58" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="60.9551" id="MMSM\\Lib\\Parsers\\JsonBodyParser" style="stroke:#A80036;stroke-width:1.5;" width="121" x="1626.5" y="54"/><ellipse cx="1641.5" cy="70" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1643.9731,76.1431 Q1643.3921,76.4419 1642.7529,76.5913 Q1642.1138,76.7407 1641.4082,76.7407 Q1638.9014,76.7407 1637.5815,75.0889 Q1636.2617,73.437 1636.2617,70.3159 Q1636.2617,67.1865 1637.5815,65.5347 Q1638.9014,63.8828 1641.4082,63.8828 Q1642.1138,63.8828 1642.7612,64.0322 Q1643.4087,64.1816 1643.9731,64.4805 L1643.9731,67.2031 Q1643.3423,66.6221 1642.7488,66.3523 Q1642.1553,66.0825 1641.5244,66.0825 Q1640.1797,66.0825 1639.4949,67.1492 Q1638.8101,68.2158 1638.8101,70.3159 Q1638.8101,72.4077 1639.4949,73.4744 Q1640.1797,74.541 1641.5244,74.541 Q1642.1553,74.541 1642.7488,74.2712 Q1643.3423,74.0015 1643.9731,73.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="1655.5" y="74.5352">JsonBodyParser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1627.5" x2="1746.5" y1="86" y2="86"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1627.5" x2="1746.5" y1="94" y2="94"/><ellipse cx="1637.5" cy="105" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="1646.5" y="108.6348">__invoke(body)</text><!--MD5=[86ac6fa56877cf12646cb7c9de1d68a0]
class MMSM\\Lib\\Parsers\\XmlBodyParser--><rect codeLine="62" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="60.9551" id="MMSM\\Lib\\Parsers\\XmlBodyParser" style="stroke:#A80036;stroke-width:1.5;" width="119" x="1472.5" y="54"/><ellipse cx="1487.5" cy="70" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1489.9731,76.1431 Q1489.3921,76.4419 1488.7529,76.5913 Q1488.1138,76.7407 1487.4082,76.7407 Q1484.9014,76.7407 1483.5815,75.0889 Q1482.2617,73.437 1482.2617,70.3159 Q1482.2617,67.1865 1483.5815,65.5347 Q1484.9014,63.8828 1487.4082,63.8828 Q1488.1138,63.8828 1488.7612,64.0322 Q1489.4087,64.1816 1489.9731,64.4805 L1489.9731,67.2031 Q1489.3423,66.6221 1488.7488,66.3523 Q1488.1553,66.0825 1487.5244,66.0825 Q1486.1797,66.0825 1485.4949,67.1492 Q1484.8101,68.2158 1484.8101,70.3159 Q1484.8101,72.4077 1485.4949,73.4744 Q1486.1797,74.541 1487.5244,74.541 Q1488.1553,74.541 1488.7488,74.2712 Q1489.3423,74.0015 1489.9731,73.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="1501.5" y="74.5352">XmlBodyParser</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1473.5" x2="1590.5" y1="86" y2="86"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1473.5" x2="1590.5" y1="94" y2="94"/><ellipse cx="1483.5" cy="105" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="1492.5" y="108.6348">__invoke(body)</text><!--MD5=[8fbe506bb4a45d5458752d7c2a6c6eef]
class MMSM\\Lib\\Validators\\ValidatorInterface--><rect codeLine="66" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="73.9102" id="MMSM\\Lib\\Validators\\ValidatorInterface" style="stroke:#A80036;stroke-width:1.5;" width="134" x="2136" y="271.5"/><ellipse cx="2151" cy="287.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2147.4277,283.7651 L2147.4277,281.6069 L2154.8071,281.6069 L2154.8071,283.7651 L2152.3418,283.7651 L2152.3418,291.8418 L2154.8071,291.8418 L2154.8071,294 L2147.4277,294 L2147.4277,291.8418 L2149.8931,291.8418 L2149.8931,283.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="102" x="2165" y="292.0352">ValidatorInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="2137" x2="2269" y1="303.5" y2="303.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2137" x2="2269" y1="311.5" y2="311.5"/><ellipse cx="2147" cy="322.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="2156" y="326.1348">validate(data)</text><ellipse cx="2147" cy="335.4551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="2156" y="339.0898">check(data)</text><!--MD5=[f0767e9c193ef4e9f124ee99dade49ed]
class MMSM\\Lib\\Validators\\JWKValidator--><rect codeLine="71" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="73.9102" id="MMSM\\Lib\\Validators\\JWKValidator" style="stroke:#A80036;stroke-width:1.5;" width="106" x="2080" y="497.5"/><ellipse cx="2095" cy="513.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2097.4731,519.6431 Q2096.8921,519.9419 2096.2529,520.0913 Q2095.6138,520.2407 2094.9082,520.2407 Q2092.4014,520.2407 2091.0815,518.5889 Q2089.7617,516.937 2089.7617,513.8159 Q2089.7617,510.6865 2091.0815,509.0347 Q2092.4014,507.3828 2094.9082,507.3828 Q2095.6138,507.3828 2096.2612,507.5322 Q2096.9087,507.6816 2097.4731,507.9805 L2097.4731,510.7031 Q2096.8423,510.1221 2096.2488,509.8523 Q2095.6553,509.5825 2095.0244,509.5825 Q2093.6797,509.5825 2092.9949,510.6492 Q2092.3101,511.7158 2092.3101,513.8159 Q2092.3101,515.9077 2092.9949,516.9744 Q2093.6797,518.041 2095.0244,518.041 Q2095.6553,518.041 2096.2488,517.7712 Q2096.8423,517.5015 2097.4731,516.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="2109" y="518.0352">JWKValidator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="2081" x2="2185" y1="529.5" y2="529.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2081" x2="2185" y1="537.5" y2="537.5"/><ellipse cx="2091" cy="548.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="2100" y="552.1348">validate(data)</text><ellipse cx="2091" cy="561.4551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="2100" y="565.0898">check(data)</text><!--MD5=[c578ed94815dedaa4437e598668c70a9]
class MMSM\\Lib\\Validators\\JWTValidator--><rect codeLine="76" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="73.9102" id="MMSM\\Lib\\Validators\\JWTValidator" style="stroke:#A80036;stroke-width:1.5;" width="106" x="2221" y="497.5"/><ellipse cx="2236" cy="513.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2238.4731,519.6431 Q2237.8921,519.9419 2237.2529,520.0913 Q2236.6138,520.2407 2235.9082,520.2407 Q2233.4014,520.2407 2232.0815,518.5889 Q2230.7617,516.937 2230.7617,513.8159 Q2230.7617,510.6865 2232.0815,509.0347 Q2233.4014,507.3828 2235.9082,507.3828 Q2236.6138,507.3828 2237.2612,507.5322 Q2237.9087,507.6816 2238.4731,507.9805 L2238.4731,510.7031 Q2237.8423,510.1221 2237.2488,509.8523 Q2236.6553,509.5825 2236.0244,509.5825 Q2234.6797,509.5825 2233.9949,510.6492 Q2233.3101,511.7158 2233.3101,513.8159 Q2233.3101,515.9077 2233.9949,516.9744 Q2234.6797,518.041 2236.0244,518.041 Q2236.6553,518.041 2237.2488,517.7712 Q2237.8423,517.5015 2238.4731,516.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="2250" y="518.0352">JWTValidator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="2222" x2="2326" y1="529.5" y2="529.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2222" x2="2326" y1="537.5" y2="537.5"/><ellipse cx="2232" cy="548.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="2241" y="552.1348">validate(data)</text><ellipse cx="2232" cy="561.4551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="2241" y="565.0898">check(data)</text><!--MD5=[97ac1f8197d8a9ed9105ec65f8ef4c8b]
class MMSM\\Lib\\AuthorizationMiddleware--><rect codeLine="84" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="232.416" id="MMSM\\Lib\\AuthorizationMiddleware" style="stroke:#A80036;stroke-width:1.5;" width="241" x="1782.5" y="192.5"/><ellipse cx="1827.25" cy="208.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1829.7231,214.6431 Q1829.1421,214.9419 1828.5029,215.0913 Q1827.8638,215.2407 1827.1582,215.2407 Q1824.6514,215.2407 1823.3315,213.5889 Q1822.0117,211.937 1822.0117,208.8159 Q1822.0117,205.6865 1823.3315,204.0347 Q1824.6514,202.3828 1827.1582,202.3828 Q1827.8638,202.3828 1828.5112,202.5322 Q1829.1587,202.6816 1829.7231,202.9805 L1829.7231,205.7031 Q1829.0923,205.1221 1828.4988,204.8523 Q1827.9053,204.5825 1827.2744,204.5825 Q1825.9297,204.5825 1825.2449,205.6492 Q1824.5601,206.7158 1824.5601,208.8159 Q1824.5601,210.9077 1825.2449,211.9744 Q1825.9297,213.041 1827.2744,213.041 Q1827.9053,213.041 1828.4988,212.7712 Q1829.0923,212.5015 1829.7231,211.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="143" x="1847.75" y="213.0352">AuthorizationMiddleware</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1783.5" x2="2022.5" y1="224.5" y2="224.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1790.5" y="232.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="1802.5" y="239.1348">JWKValidator</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1790.5" y="245.4551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="1802.5" y="252.0898">bearers</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1790.5" y="258.4102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="1802.5" y="265.0449">JWTValidator</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1790.5" y="271.3652"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1802.5" y="278">keySet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1783.5" x2="2022.5" y1="284.3203" y2="284.3203"/><ellipse cx="1793.5" cy="295.3203" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="1802.5" y="298.9551">EXPECTED_ALG</text><ellipse cx="1793.5" cy="308.2754" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="1802.5" y="311.9102">HEADER</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1783.5" x2="2022.5" y1="318.2305" y2="318.2305"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1783.5" x2="2022.5" y1="320.2305" y2="320.2305"/><ellipse cx="1793.5" cy="329.2305" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="215" x="1802.5" y="332.8652">__construct (JWKValidator, JWTValidator)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1783.5" x2="2022.5" y1="339.1855" y2="339.1855"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1783.5" x2="2022.5" y1="341.1855" y2="341.1855"/><ellipse cx="1793.5" cy="350.1855" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="1802.5" y="353.8203">loadJWKs (path, local)</text><ellipse cx="1793.5" cy="363.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="1802.5" y="366.7754">addAllowedBearer (bearer)</text><ellipse cx="1793.5" cy="376.0957" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146" x="1802.5" y="379.7305">__invoke (request, handler)</text><polygon fill="#FFFF44" points="1793.5,384.0508,1797.5,388.0508,1793.5,392.0508,1789.5,388.0508" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="1802.5" y="392.6855">getHeader (request)</text><ellipse cx="1793.5" cy="402.0059" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="1802.5" y="405.6406">process (request, handler)</text><polygon fill="#FFFF44" points="1793.5,409.9609,1797.5,413.9609,1793.5,417.9609,1789.5,413.9609" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="1802.5" y="418.5957">isValidBearer (bearer)</text><!--MD5=[8286e1c6c9eefd6872d5f6ca6aa4e323]
class MMSM\\Lib\\Authorizer--><rect codeLine="105" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="237.3711" id="MMSM\\Lib\\Authorizer" style="stroke:#A80036;stroke-width:1.5;" width="264" x="1483" y="190"/><ellipse cx="1580.75" cy="206" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1583.2231,212.1431 Q1582.6421,212.4419 1582.0029,212.5913 Q1581.3638,212.7407 1580.6582,212.7407 Q1578.1514,212.7407 1576.8315,211.0889 Q1575.5117,209.437 1575.5117,206.3159 Q1575.5117,203.1865 1576.8315,201.5347 Q1578.1514,199.8828 1580.6582,199.8828 Q1581.3638,199.8828 1582.0112,200.0322 Q1582.6587,200.1816 1583.2231,200.4805 L1583.2231,203.2031 Q1582.5923,202.6221 1581.9988,202.3523 Q1581.4053,202.0825 1580.7744,202.0825 Q1579.4297,202.0825 1578.7449,203.1492 Q1578.0601,204.2158 1578.0601,206.3159 Q1578.0601,208.4077 1578.7449,209.4744 Q1579.4297,210.541 1580.7744,210.541 Q1581.4053,210.541 1581.9988,210.2712 Q1582.5923,210.0015 1583.2231,209.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="1601.25" y="210.5352">Authorizer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1484" x2="1746" y1="222" y2="222"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1491" y="230"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="51" x="1503" y="236.6348">container</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1746" y1="242.9551" y2="242.9551"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1746" y1="244.9551" y2="244.9551"/><ellipse cx="1494" cy="253.9551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="1503" y="257.5898">__construct (container)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1746" y1="263.9102" y2="263.9102"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1484" x2="1746" y1="265.9102" y2="265.9102"/><ellipse cx="1494" cy="274.9102" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="1503" y="278.5449">authorizeToRole (request, roleKey)</text><ellipse cx="1494" cy="287.8652" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="1503" y="291.5">getInternalRoles (roles)</text><polygon fill="#FFFF44" points="1494,295.8203,1498,299.8203,1494,303.8203,1490,299.8203" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="180" x="1503" y="304.4551">readTokenFromRequest (request)</text><polygon fill="#FFFF44" points="1494,308.7754,1498,312.7754,1494,316.7754,1490,312.7754" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="163" x="1503" y="317.4102">hasInternalRoles (token, roles)</text><ellipse cx="1494" cy="326.7305" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="230" x="1503" y="330.3652">getAppMetadata (request, emptyOnFailure)</text><ellipse cx="1494" cy="339.6855" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="201" x="1503" y="343.3203">isUserInLocation (request, locationId)</text><ellipse cx="1494" cy="352.6406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="233" x="1503" y="356.2754">getUserMetadata (request, emptyOnFailure)</text><polygon fill="#FFFF44" points="1494,360.5957,1498,364.5957,1494,368.5957,1490,364.5957" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="1503" y="369.2305">isValidRoleKeys (keys)</text><ellipse cx="1494" cy="378.5508" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="226" x="1503" y="382.1855">hasRole (request, roleKey, failOnNoToken)</text><polygon fill="#FFFF44" points="1494,386.5059,1498,390.5059,1494,394.5059,1490,390.5059" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="198" x="1503" y="395.1406">readNamespacedClaim (token, name)</text><ellipse cx="1494" cy="404.4609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="238" x="1503" y="408.0957">hasRoles (request, roleKeys, failOnNoToken)</text><ellipse cx="1494" cy="417.416" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="195" x="1503" y="421.0508">authorizetoRoles (request, roleKeys)</text><!--MD5=[381629905fa87e9e6f3ec1d28129125d]
class MMSM\\Lib\\Container--><rect codeLine="134" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="60.9551" id="MMSM\\Lib\\Container" style="stroke:#A80036;stroke-width:1.5;" width="87" x="1496.5" y="504"/><ellipse cx="1511.5" cy="520" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1513.9731,526.1431 Q1513.3921,526.4419 1512.7529,526.5913 Q1512.1138,526.7407 1511.4082,526.7407 Q1508.9014,526.7407 1507.5815,525.0889 Q1506.2617,523.437 1506.2617,520.3159 Q1506.2617,517.1865 1507.5815,515.5347 Q1508.9014,513.8828 1511.4082,513.8828 Q1512.1138,513.8828 1512.7612,514.0322 Q1513.4087,514.1816 1513.9731,514.4805 L1513.9731,517.2031 Q1513.3423,516.6221 1512.7488,516.3523 Q1512.1553,516.0825 1511.5244,516.0825 Q1510.1797,516.0825 1509.4949,517.1492 Q1508.8101,518.2158 1508.8101,520.3159 Q1508.8101,522.4077 1509.4949,523.4744 Q1510.1797,524.541 1511.5244,524.541 Q1512.1553,524.541 1512.7488,524.2712 Q1513.3423,524.0015 1513.9731,523.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="55" x="1525.5" y="524.5352">Container</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1497.5" x2="1582.5" y1="536" y2="536"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1497.5" x2="1582.5" y1="544" y2="544"/><ellipse cx="1507.5" cy="555" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="1516.5" y="558.6348">get(name)</text><!--MD5=[123ff19d03d159dbbf067725af45817f]
class MMSM\\Lib\\BodyParsingMiddleware--><rect codeLine="126" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="94.8652" id="MMSM\\Lib\\BodyParsingMiddleware" style="stroke:#A80036;stroke-width:1.5;" width="286" x="893" y="261"/><ellipse cx="963.25" cy="277" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M965.7231,283.1431 Q965.1421,283.4419 964.5029,283.5913 Q963.8638,283.7407 963.1582,283.7407 Q960.6514,283.7407 959.3315,282.0889 Q958.0117,280.437 958.0117,277.3159 Q958.0117,274.1865 959.3315,272.5347 Q960.6514,270.8828 963.1582,270.8828 Q963.8638,270.8828 964.5112,271.0322 Q965.1587,271.1816 965.7231,271.4805 L965.7231,274.2031 Q965.0923,273.6221 964.4988,273.3523 Q963.9053,273.0825 963.2744,273.0825 Q961.9297,273.0825 961.2449,274.1492 Q960.5601,275.2158 960.5601,277.3159 Q960.5601,279.4077 961.2449,280.4744 Q961.9297,281.541 963.2744,281.541 Q963.9053,281.541 964.4988,281.2712 Q965.0923,281.0015 965.7231,280.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="983.75" y="281.5352">BodyParsingMiddleware</text><line style="stroke:#A80036;stroke-width:1.5;" x1="894" x2="1178" y1="293" y2="293"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="901" y="301"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="115" x="913" y="307.6348">jsonResponseFactory</text><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1178" y1="313.9551" y2="313.9551"/><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1178" y1="315.9551" y2="315.9551"/><ellipse cx="904" cy="324.9551" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="260" x="913" y="328.5898">__construct(jsonResponseFactory, bodyParsers)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1178" y1="334.9102" y2="334.9102"/><line style="stroke:#A80036;stroke-width:1.0;" x1="894" x2="1178" y1="336.9102" y2="336.9102"/><polygon fill="#FFFF44" points="904,340.9102,908,344.9102,904,348.9102,900,344.9102" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="105" x="913" y="349.5449">parseBody(request)</text><!--MD5=[607a43e0edd98be28304c3f8de84bf1e]
class MMSM\\Lib\\InternalKeySet--><rect codeLine="138" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="48" id="MMSM\\Lib\\InternalKeySet" style="stroke:#A80036;stroke-width:1.5;" width="113" x="1274.5" y="510.5"/><ellipse cx="1289.5" cy="526.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1291.9731,532.6431 Q1291.3921,532.9419 1290.7529,533.0913 Q1290.1138,533.2407 1289.4082,533.2407 Q1286.9014,533.2407 1285.5815,531.5889 Q1284.2617,529.937 1284.2617,526.8159 Q1284.2617,523.6865 1285.5815,522.0347 Q1286.9014,520.3828 1289.4082,520.3828 Q1290.1138,520.3828 1290.7612,520.5322 Q1291.4087,520.6816 1291.9731,520.9805 L1291.9731,523.7031 Q1291.3423,523.1221 1290.7488,522.8523 Q1290.1553,522.5825 1289.5244,522.5825 Q1288.1797,522.5825 1287.4949,523.6492 Q1286.8101,524.7158 1286.8101,526.8159 Q1286.8101,528.9077 1287.4949,529.9744 Q1288.1797,531.041 1289.5244,531.041 Q1290.1553,531.041 1290.7488,530.7712 Q1291.3423,530.5015 1291.9731,529.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="1303.5" y="531.0352">InternalKeySet</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1275.5" x2="1386.5" y1="542.5" y2="542.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1275.5" x2="1386.5" y1="550.5" y2="550.5"/><!--MD5=[aee7c7c50ca1bb7994ab135a9b695374]
class MMSM\\Lib\\JwtHandler--><rect codeLine="145" fill="#FEFECE" filter="url(#f1opn4azs51r90)" height="154.6855" id="MMSM\\Lib\\JwtHandler" style="stroke:#A80036;stroke-width:1.5;" width="234" x="1214" y="231"/><ellipse cx="1295.25" cy="247" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1297.7231,253.1431 Q1297.1421,253.4419 1296.5029,253.5913 Q1295.8638,253.7407 1295.1582,253.7407 Q1292.6514,253.7407 1291.3315,252.0889 Q1290.0117,250.437 1290.0117,247.3159 Q1290.0117,244.1865 1291.3315,242.5347 Q1292.6514,240.8828 1295.1582,240.8828 Q1295.8638,240.8828 1296.5112,241.0322 Q1297.1587,241.1816 1297.7231,241.4805 L1297.7231,244.2031 Q1297.0923,243.6221 1296.4988,243.3523 Q1295.9053,243.0825 1295.2744,243.0825 Q1293.9297,243.0825 1293.2449,244.1492 Q1292.5601,245.2158 1292.5601,247.3159 Q1292.5601,249.4077 1293.2449,250.4744 Q1293.9297,251.541 1295.2744,251.541 Q1295.9053,251.541 1296.4988,251.2712 Q1297.0923,251.0015 1297.7231,250.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="63" x="1315.75" y="251.5352">JwtHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1215" x2="1447" y1="263" y2="263"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1222" y="271"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="51" x="1234" y="277.6348">container</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1222" y="283.9551"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="76" x="1234" y="290.5898">internalKeySet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1215" x2="1447" y1="296.9102" y2="296.9102"/><ellipse cx="1225" cy="307.9102" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="1234" y="311.5449">ALG</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1215" x2="1447" y1="317.8652" y2="317.8652"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1215" x2="1447" y1="319.8652" y2="319.8652"/><ellipse cx="1225" cy="328.8652" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="208" x="1234" y="332.5">__construct (internalKeyset, container)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1215" x2="1447" y1="338.8203" y2="338.8203"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1215" x2="1447" y1="340.8203" y2="340.8203"/><polygon fill="#FFFF44" points="1225,344.8203,1229,348.8203,1225,352.8203,1221,348.8203" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="1234" y="353.4551">getNewestKeyId ()</text><ellipse cx="1225" cy="362.7754" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="1234" y="366.4102">create (data, exp)</text><ellipse cx="1225" cy="375.7305" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="1234" y="379.3652">decode (jwt)</text><!--MD5=[053c30198c6d255ffef67d729c6177a9]
link MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler to MMSM\\Lib\\Factories\\JsonResponseFactory--><path codeLine="10" d="M555.48,382.22 C571.36,397.19 588.12,412.73 604,427 C622.87,443.96 643.73,462 662.92,478.32 " fill="none" id="MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler-to-MMSM\\Lib\\Factories\\JsonResponseFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="673.08,486.94,671.0879,480.0095,663.9244,479.1828,665.9164,486.1133,673.08,486.94" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fd5f154a95b7cfaef1075ac3bec122d5]
reverse link MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface to MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler--><path d="M570.37,145.7 C555,173.23 536.65,206.07 520.52,234.95 " fill="none" id="MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface-backto-MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="564.37,142.09,580.24,128.04,576.6,148.92,564.37,142.09" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1d9a536d9ee308f4f0ba6d6355539f4a]
link MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler to MMSM\\Lib\\Factories\\JsonResponseFactory--><path codeLine="24" d="M729,382.23 C729,411.76 729,445.46 729,473.55 " fill="none" id="MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler-to-MMSM\\Lib\\Factories\\JsonResponseFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="729,486.84,733,480.84,729,474.84,725,480.84,729,486.84" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b5e52ba86189954dcb7b84ae9f8f919b]
reverse link MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface to MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler--><path d="M637.9,145.7 C653.4,173.23 671.89,206.07 688.15,234.95 " fill="none" id="MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface-backto-MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="631.67,148.9,627.95,128.04,643.87,142.03,631.67,148.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[05fb1b3b0868bcd4b9d6b8811ae42288]
reverse link MMSM\\Lib\\Validators\\ValidatorInterface to MMSM\\Lib\\Validators\\JWKValidator--><path d="M2185.56,365.31 C2172.65,406.62 2155.43,461.72 2144.28,497.4 " fill="none" id="MMSM\\Lib\\Validators\\ValidatorInterface-backto-MMSM\\Lib\\Validators\\JWKValidator" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2178.95,362.99,2191.6,345.99,2192.31,367.17,2178.95,362.99" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[52aed525ad92b65afcfe937aa6cceaea]
reverse link MMSM\\Lib\\Validators\\ValidatorInterface to MMSM\\Lib\\Validators\\JWTValidator--><path d="M2220.69,365.31 C2233.79,406.62 2251.25,461.72 2262.56,497.4 " fill="none" id="MMSM\\Lib\\Validators\\ValidatorInterface-backto-MMSM\\Lib\\Validators\\JWTValidator" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2213.94,367.17,2214.57,345.99,2227.28,362.94,2213.94,367.17" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6e940afaffb2c0a1de82c50a0f52e469]
link MMSM\\Lib\\AuthorizationMiddleware to MMSM\\Lib\\Validators\\JWKValidator--><path codeLine="81" d="M2021.37,424.78 C2044.43,447.24 2067.3,469.52 2086.29,488.01 " fill="none" id="MMSM\\Lib\\AuthorizationMiddleware-to-MMSM\\Lib\\Validators\\JWKValidator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="2095.84,497.31,2094.3325,490.2582,2087.2434,488.9375,2088.7509,495.9893,2095.84,497.31" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7ebbf4788da11ab3777f6a30caacee17]
link MMSM\\Lib\\AuthorizationMiddleware to MMSM\\Lib\\Validators\\JWTValidator--><path codeLine="82" d="M2023.61,407.1 C2036.74,414.76 2050.32,421.6 2064,427 C2122.31,450 2149.42,413.19 2204,444 C2221.59,453.93 2236.3,470.23 2247.63,486.22 " fill="none" id="MMSM\\Lib\\AuthorizationMiddleware-to-MMSM\\Lib\\Validators\\JWTValidator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="2254.92,497.15,2254.9178,489.9389,2248.2606,487.1674,2248.2628,494.3785,2254.92,497.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[52d275049c3d14ca0f028c9c12358c78]
link MMSM\\Lib\\Authorizer to MMSM\\Lib\\Container--><path codeLine="103" d="M1575.63,427.08 C1567.91,450.14 1560.3,472.88 1554.1,491.39 " fill="none" id="MMSM\\Lib\\Authorizer-to-MMSM\\Lib\\Container" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="1549.96,503.76,1555.6582,499.3407,1553.7706,492.3811,1548.0723,496.8004,1549.96,503.76" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3fdf51c533b326e82abae68138d88bde]
link MMSM\\Lib\\BodyParsingMiddleware to MMSM\\Lib\\Factories\\JsonResponseFactory--><path codeLine="124" d="M972.02,356.19 C922.96,391.98 855.16,441.45 803.64,479.04 " fill="none" id="MMSM\\Lib\\BodyParsingMiddleware-to-MMSM\\Lib\\Factories\\JsonResponseFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="792.9,486.88,800.1047,486.5766,802.5957,479.8094,795.391,480.1128,792.9,486.88" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[782f194fe80ac26a530490b9b0f718cd]
link MMSM\\Lib\\JwtHandler to MMSM\\Lib\\Container--><path codeLine="142" d="M1402.63,386.27 C1436.5,422.57 1475.49,464.36 1503.26,494.13 " fill="none" id="MMSM\\Lib\\JwtHandler-to-MMSM\\Lib\\Container" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="1512.23,503.73,1511.0695,496.6129,1504.0535,494.9468,1505.214,502.0639,1512.23,503.73" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4bed3a2d9e31db22a58753d2307f0c60]
link MMSM\\Lib\\JwtHandler to MMSM\\Lib\\InternalKeySet--><path codeLine="143" d="M1331,386.27 C1331,423.89 1331,467.4 1331,497.31 " fill="none" id="MMSM\\Lib\\JwtHandler-to-MMSM\\Lib\\InternalKeySet" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="1331,510.42,1335,504.42,1331,498.42,1327,504.42,1331,510.42" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4cbc1c5fa6ce3c0f111450ad6db75c7f]
link MMSM\\Lib\\Exceptions\\DefinitionException to MMSM\\Lib\\Exceptions\\JwkException--><!--MD5=[382eff1eda9a0482852d0d8a8b936c33]
link MMSM\\Lib\\Exceptions\\DefinitionException to MMSM\\Lib\\Exceptions\\JWKKeyFileException--><!--MD5=[af55fce06ba20d1d9974891719a7043b]
@startuml Class UML
    
    set namespaceSeparator \\

    interface "MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface" {
        + {method} __invoke(request, throwable,
                            displayErrorDetails, logErrors,
                            logErrorDetails)
    }

    "MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler" - -o "MMSM\\Lib\\Factories\\JsonResponseFactory"

    class "MMSM\\Lib\\ErrorHandlers\\JsonErrorHandler" implements MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface {
        - logger
        - jsonResponseFactory
        ==
        + {method} __construct(jsonResponseFactory)
        ==
        + {method} __invoke(request, throwable,
                            displayErrorDetails, logErrors,
                            logErrorDetails)
        + {method} setLogger(logger)
    }

    "MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler" - -o "MMSM\\Lib\\Factories\\JsonResponseFactory"

    class "MMSM\\Lib\\ErrorHandlers\\ValidationExceptionJsonHandler" implements MMSM\\Lib\\ErrorHandlers\\ErrorHandlerInterface {
        - logger
        - jsonResponseFactory
        ==
        + {method} __construct(jsonResponseFactory)
        ==
        + {method} __invoke(request, throwable,
                            displayErrorDetails, logErrors,
                            logErrorDetails)
        + {method} setLogger(logger)
    }

    class "MMSM\\Lib\\Exceptions\\DefinitionException" {

    }

    class "MMSM\\Lib\\Exceptions\\JwkException" {

    }

    class "MMSM\\Lib\\Exceptions\\JWKKeyFileException" {

    }

    class "MMSM\\Lib\\Factories\\JsonResponseFactory" {
        - responseFactory
        ==
        + {method} __construct(responseFactory)
        ==
        + {method} create(code, data)
    }

    class "MMSM\\Lib\\Parsers\\JsonBodyParser" {
        + {method} __invoke(body)
    }

    class "MMSM\\Lib\\Parsers\\XmlBodyParser" {
        + {method} __invoke(body)
    }

    interface "MMSM\\Lib\\Validators\\ValidatorInterface" {
        + {method} validate(data)
        + {method} check(data)
    }

    class "MMSM\\Lib\\Validators\\JWKValidator" implements MMSM\\Lib\\Validators\\ValidatorInterface {
        + {method} validate(data)
        + {method} check(data)
    }

    class "MMSM\\Lib\\Validators\\JWTValidator" implements MMSM\\Lib\\Validators\\ValidatorInterface {
        + {method} validate(data)
        + {method} check(data)
    }

    "MMSM\\Lib\\AuthorizationMiddleware" - -o "MMSM\\Lib\\Validators\\JWKValidator"
    "MMSM\\Lib\\AuthorizationMiddleware" - -o "MMSM\\Lib\\Validators\\JWTValidator"

    class "MMSM\\Lib\\AuthorizationMiddleware" {
        - JWKValidator
        - bearers
        - JWTValidator
        - keySet
        - -
        + EXPECTED_ALG
        + HEADER
        ==
        + {method} __construct (JWKValidator, JWTValidator)
        ==
        + {method} loadJWKs (path, local)
        + {method} addAllowedBearer (bearer)
        + {method} __invoke (request, handler)
        # {method} getHeader (request)
        + {method} process (request, handler)
        # {method} isValidBearer (bearer)
    }

    "MMSM\\Lib\\Authorizer" - -o "MMSM\\Lib\\Container"

    class "MMSM\\Lib\\Authorizer" {
        -container
        ==
        + {method} __construct (container)
        ==
        + {method} authorizeToRole (request, roleKey)
        + {method} getInternalRoles (roles)
        # {method} readTokenFromRequest (request)
        # {method} hasInternalRoles (token, roles)
        + {method} getAppMetadata (request, emptyOnFailure)
        + {method} isUserInLocation (request, locationId)
        + {method} getUserMetadata (request, emptyOnFailure)
        # {method} isValidRoleKeys (keys)
        + {method} hasRole (request, roleKey, failOnNoToken)
        # {method} readNamespacedClaim (token, name)
        + {method} hasRoles (request, roleKeys, failOnNoToken)
        + {method} authorizetoRoles (request, roleKeys)
    }

    "MMSM\\Lib\\BodyParsingMiddleware" - -o "MMSM\\Lib\\Factories\\JsonResponseFactory"

    class "MMSM\\Lib\\BodyParsingMiddleware" {
        - jsonResponseFactory
        ==
        + {method} __construct(jsonResponseFactory, bodyParsers)
        ==
        # {method} parseBody(request)
    }

    class "MMSM\\Lib\\Container" {
        + {method} get(name)
    }

    class "MMSM\\Lib\\InternalKeySet" {

    }

    "MMSM\\Lib\\JwtHandler" - -o "MMSM\\Lib\\Container"
    "MMSM\\Lib\\JwtHandler" - -o "MMSM\\Lib\\InternalKeySet"

    class "MMSM\\Lib\\JwtHandler" {
        - container
        - internalKeySet
        - -
        + ALG
        ==
        + {method} __construct (internalKeyset, container)
        ==
        # {method} getNewestKeyId ()
        + {method} create (data, exp)
        + {method} decode (jwt)
    }

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>